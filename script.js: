const slider = document.getElementById('searchSlider');
const tooltip = document.getElementById('tooltip');
const searchBtn = document.getElementById('searchBtn');
const inputBox = document.getElementById('inputbox');
const darkModeToggle = document.getElementById('darkModeToggle');

// List of search engines
const engines = [
    { name: 'ChatGPT', url: 'https://chat.openai.com/search?q=' },
    { name: 'Perplexity AI', url: 'https://www.perplexity.ai/search?q=' },
    { name: 'Google', url: 'https://www.google.com/search?q=' }
];

// Update tooltip based on slider input
slider.addEventListener('input', () => {
    const index = Math.min(Math.max(slider.value, 0), engines.length - 1); // Ensure within bounds
    const selectedEngine = engines[index];
    tooltip.textContent = selectedEngine.name;
});

// Reusable search function
function performSearch() {
    const query = inputBox.value.trim();
    if (query) {
        const index = Math.min(Math.max(slider.value, 0), engines.length - 1); // Ensure within bounds
        const selectedEngine = engines[index];
        window.open(`${selectedEngine.url}${encodeURIComponent(query)}`, '_blank');
    }
    // Do nothing if query is empty
}

// Search button click event
searchBtn.addEventListener('click', performSearch);

// Press Enter to search
inputBox.addEventListener('keyup', (event) => {
    if (event.key === 'Enter') {
        performSearch();
    }
});

// Dark Mode Toggle
darkModeToggle.addEventListener('click', () => {
    document.body.classList.toggle('dark');
    const isDarkMode = document.body.classList.contains('dark');
    localStorage.setItem('darkMode', isDarkMode); // Store preference in localStorage

    document.body.style.background = isDarkMode
        ? 'linear-gradient(135deg, #1f1f1f, #1a1a1a)' // Black theme for night (moon)
        : 'linear-gradient(135deg, #15386e, #1976d2)'; // Blue theme for day (sun)

    darkModeToggle.textContent = isDarkMode ? 'â˜€ï¸' : 'ðŸŒ™';
});

// Apply stored dark mode preference on load
if (localStorage.getItem('darkMode') === 'true') {
    document.body.classList.add('dark');
    document.body.style.background = 'linear-gradient(135deg, #1f1f1f, #1a1a1a)';
    darkModeToggle.textContent = 'â˜€ï¸';
}
